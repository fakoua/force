<!-- @force
{
    "title": "About Force",
    "layout": "layout",
    "meta": [
        { "Sameh": "Fakoua" },
        { "name": "view", "content": "width=device-width, initial-scale=1.0"}
    ]
}
-->
<section name="toolbar">
    <li>
        <a class="waves-effect waves-light btn btn-flat indigo white-text" href="/admin/pages/edit">
            <i class="material-icons left">add</i>
            New Page
        </a>
    </li>
</section>
<div class="container fluid">
    <div class="row">
        <ul class="collection white" id="menu-items" style="display: none;">
            @@~it:value:index$$
            <li class="collection-item avatar @@? value.isSub $$sub-menu@@?$$">
                <i class="material-icons circle white black-text av">
                    @@? value.isHome $$
                    home
                    @@??$$
                    text_snippet
                    @@?$$
                </i>
                <a href="pages/edit?pageId=@@=value.pageId$$">
                    <span class="title">@@=value.menuTitle$$</span>
                </a>
                <p>
                    @@=value.relativePath$$
                </p>
                <a href="#!" class="secondary-content red-text"><i class="material-icons del">delete</i></a>
            </li>
            @@~$$
        </ul>
    </div>
</div>
<section name="script">
    <script>
        axios.get("/admin/api/pages")
            .then((res) => {
                const template = $('#menu-items').html()
                const tempFn = doT.compile(template)
                let html = tempFn(res.data)
                $('#menu-items').html(html)
                $('#menu-items').show()
                console.log('done menu')
            })
            .catch((err) => {
                console.log(err)
            })
            .then(() => {
                console.log('loader hidden')
                hideLoader()
            })
    </script>
</section>